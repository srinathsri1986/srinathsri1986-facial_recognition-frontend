{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useParams}from\"react-router-dom\";import HRScheduleMeeting from\"./HRScheduleMeeting\";// ✅ Import Schedule Meeting Component\nimport\"./HRCandidateDetails.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE_URL=\"http://141.148.219.190:8000\";const HRCandidateDetails=()=>{const{candidateId}=useParams();const[candidate,setCandidate]=useState(null);const[meetings,setMeetings]=useState([]);const[showSchedule,setShowSchedule]=useState(false);const[resumeText,setResumeText]=useState(\"\");const[resumeFile,setResumeFile]=useState(\"\");useEffect(()=>{const fetchCandidate=async()=>{try{const response=await fetch(`${API_BASE_URL}/api/hr/candidate/${candidateId}`);if(!response.ok)throw new Error(\"Candidate not found\");const data=await response.json();setCandidate(data.data);// Fetch Resume Text if Available\nif(data.data.resume){fetchResume(data.data.resume);}}catch(error){console.error(\"❌ Error fetching candidate details:\",error);}};const fetchMeetings=async()=>{try{const response=await fetch(`${API_BASE_URL}/api/hr/meetings/${candidateId}`);if(!response.ok)throw new Error(\"Meetings not found\");const data=await response.json();setMeetings(data.data||[]);}catch(error){console.error(\"❌ Error fetching meetings:\",error);}};const fetchResume=async resumeUrl=>{try{const response=await fetch(`${API_BASE_URL}/api/hr/candidate/${candidateId}/resume`);const data=await response.json();setResumeText(data.parsed_text||\"No Resume Available\");setResumeFile(`${API_BASE_URL}${data.file_url}`);}catch(error){console.error(\"❌ Error parsing resume:\",error);setResumeText(\"Unable to parse resume.\");}};fetchCandidate();fetchMeetings();},[candidateId]);return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-container\",children:[/*#__PURE__*/_jsxs(\"aside\",{className:\"sidebar\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCC5 Candidate's Meetings\"}),meetings.length>0?/*#__PURE__*/_jsx(\"ul\",{children:meetings.map((meeting,index)=>/*#__PURE__*/_jsxs(\"li\",{className:\"meeting-item\",children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsxs(\"strong\",{children:[candidate===null||candidate===void 0?void 0:candidate.first_name,\" \",candidate===null||candidate===void 0?void 0:candidate.last_name]})}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83D\\uDD52 \",new Date(meeting.scheduled_at).toLocaleString()]}),/*#__PURE__*/_jsx(\"a\",{href:meeting.join_url,target:\"_blank\",rel:\"noopener noreferrer\",className:\"join-meeting\",children:\"\\uD83D\\uDD17 Join Meeting\"})]},index))}):/*#__PURE__*/_jsx(\"p\",{children:\"No upcoming meetings.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Candidate Details\"}),candidate?/*#__PURE__*/_jsxs(\"div\",{className:\"candidate-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-section\",children:[/*#__PURE__*/_jsx(\"img\",{src:`${API_BASE_URL}${candidate.photo}`,alt:\"Candidate\",className:\"candidate-photo\"}),/*#__PURE__*/_jsxs(\"h3\",{children:[candidate.first_name,\" \",candidate.last_name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Email: \",/*#__PURE__*/_jsx(\"a\",{href:`mailto:${candidate.email}`,children:candidate.email})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Verified: \",candidate.verified?\"✅ Yes\":\"❌ No\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"documents-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCC1 Documents\"}),candidate.id_proof&&/*#__PURE__*/_jsx(\"img\",{src:`${API_BASE_URL}${candidate.id_proof}`,alt:\"ID Proof\",className:\"id-proof-image\"}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"a\",{href:resumeFile,download:true,target:\"_blank\",children:\"\\uD83D\\uDCC4 Download Resume\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"resume-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCDC Resume Content\"}),/*#__PURE__*/_jsx(\"pre\",{className:\"resume-content\",children:resumeText})]}),/*#__PURE__*/_jsx(\"button\",{className:\"schedule-meeting-btn\",onClick:()=>setShowSchedule(true),children:\"\\uD83D\\uDCC5 Schedule Meeting\"}),showSchedule&&/*#__PURE__*/_jsx(HRScheduleMeeting,{candidate:candidate,onClose:()=>setShowSchedule(false)})]}):/*#__PURE__*/_jsx(\"p\",{children:\"Loading candidate details...\"})]})]});};export default HRCandidateDetails;","map":{"version":3,"names":["React","useEffect","useState","useParams","HRScheduleMeeting","jsx","_jsx","jsxs","_jsxs","API_BASE_URL","HRCandidateDetails","candidateId","candidate","setCandidate","meetings","setMeetings","showSchedule","setShowSchedule","resumeText","setResumeText","resumeFile","setResumeFile","fetchCandidate","response","fetch","ok","Error","data","json","resume","fetchResume","error","console","fetchMeetings","resumeUrl","parsed_text","file_url","className","children","length","map","meeting","index","first_name","last_name","Date","scheduled_at","toLocaleString","href","join_url","target","rel","src","photo","alt","email","verified","id_proof","download","onClick","onClose"],"sources":["/var/www/html/facial_recognition/frontend/src/components/HRCandidateDetails.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport HRScheduleMeeting from \"./HRScheduleMeeting\";  // ✅ Import Schedule Meeting Component\nimport \"./HRCandidateDetails.css\";\n\nconst API_BASE_URL = \"http://141.148.219.190:8000\";\n\nconst HRCandidateDetails = () => {\n  const { candidateId } = useParams();\n  const [candidate, setCandidate] = useState(null);\n  const [meetings, setMeetings] = useState([]);\n  const [showSchedule, setShowSchedule] = useState(false);\n  const [resumeText, setResumeText] = useState(\"\");\n  const [resumeFile, setResumeFile] = useState(\"\");\n\n  useEffect(() => {\n    const fetchCandidate = async () => {\n      try {\n        const response = await fetch(`${API_BASE_URL}/api/hr/candidate/${candidateId}`);\n        if (!response.ok) throw new Error(\"Candidate not found\");\n        const data = await response.json();\n        setCandidate(data.data);\n\n        // Fetch Resume Text if Available\n        if (data.data.resume) {\n          fetchResume(data.data.resume);\n        }\n      } catch (error) {\n        console.error(\"❌ Error fetching candidate details:\", error);\n      }\n    };\n\n    const fetchMeetings = async () => {\n      try {\n        const response = await fetch(`${API_BASE_URL}/api/hr/meetings/${candidateId}`);\n        if (!response.ok) throw new Error(\"Meetings not found\");\n        const data = await response.json();\n        setMeetings(data.data || []);\n      } catch (error) {\n        console.error(\"❌ Error fetching meetings:\", error);\n      }\n    };\n\n    const fetchResume = async (resumeUrl) => {\n      try {\n        const response = await fetch(`${API_BASE_URL}/api/hr/candidate/${candidateId}/resume`);\n        const data = await response.json();\n        setResumeText(data.parsed_text || \"No Resume Available\");\n        setResumeFile(`${API_BASE_URL}${data.file_url}`);\n      } catch (error) {\n        console.error(\"❌ Error parsing resume:\", error);\n        setResumeText(\"Unable to parse resume.\");\n      }\n    };\n\n    fetchCandidate();\n    fetchMeetings();\n  }, [candidateId]);\n\n  return (\n    <div className=\"dashboard-container\">\n      {/* Sidebar for Meetings */}\n      <aside className=\"sidebar\">\n        <h3>📅 Candidate's Meetings</h3>\n        {meetings.length > 0 ? (\n          <ul>\n            {meetings.map((meeting, index) => (\n              <li key={index} className=\"meeting-item\">\n                <p><strong>{candidate?.first_name} {candidate?.last_name}</strong></p>\n                <p>🕒 {new Date(meeting.scheduled_at).toLocaleString()}</p>\n                <a href={meeting.join_url} target=\"_blank\" rel=\"noopener noreferrer\" className=\"join-meeting\">\n                  🔗 Join Meeting\n                </a>\n              </li>\n            ))}\n          </ul>\n        ) : (\n          <p>No upcoming meetings.</p>\n        )}\n      </aside>\n\n      {/* Candidate Details */}\n      <div className=\"content\">\n        <h2>Candidate Details</h2>\n        {candidate ? (\n          <div className=\"candidate-details\">\n            {/* Profile Section */}\n            <div className=\"profile-section\">\n              <img src={`${API_BASE_URL}${candidate.photo}`} alt=\"Candidate\" className=\"candidate-photo\" />\n              <h3>{candidate.first_name} {candidate.last_name}</h3>\n              <p>Email: <a href={`mailto:${candidate.email}`}>{candidate.email}</a></p>\n              <p>Verified: {candidate.verified ? \"✅ Yes\" : \"❌ No\"}</p>\n            </div>\n\n            {/* Documents Section */}\n            <div className=\"documents-section\">\n              <h3>📁 Documents</h3>\n              {candidate.id_proof && (\n                <img src={`${API_BASE_URL}${candidate.id_proof}`} alt=\"ID Proof\" className=\"id-proof-image\" />\n              )}\n              <p><a href={resumeFile} download target=\"_blank\">📄 Download Resume</a></p>\n            </div>\n\n            {/* Resume Parsed Content */}\n            <div className=\"resume-section\">\n              <h3>📜 Resume Content</h3>\n              <pre className=\"resume-content\">{resumeText}</pre>\n            </div>\n\n            {/* Schedule Meeting */}\n            <button className=\"schedule-meeting-btn\" onClick={() => setShowSchedule(true)}>\n              📅 Schedule Meeting\n            </button>\n            {showSchedule && <HRScheduleMeeting candidate={candidate} onClose={() => setShowSchedule(false)} />}\n          </div>\n        ) : (\n          <p>Loading candidate details...</p>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default HRCandidateDetails;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}