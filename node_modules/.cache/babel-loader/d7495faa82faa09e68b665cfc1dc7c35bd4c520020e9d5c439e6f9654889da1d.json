{"ast":null,"code":"import React,{useRef,useState}from\"react\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const VideoCapture=()=>{const videoRef=useRef(null);const mediaRecorderRef=useRef(null);const[recording,setRecording]=useState(false);const[videoBlob,setVideoBlob]=useState(null);const[email,setEmail]=useState(\"\");const startRecording=async()=>{try{const stream=await navigator.mediaDevices.getUserMedia({video:true});videoRef.current.srcObject=stream;const mediaRecorder=new MediaRecorder(stream);const chunks=[];mediaRecorder.ondataavailable=event=>{if(event.data.size>0){chunks.push(event.data);}};mediaRecorder.onstop=()=>{const blob=new Blob(chunks,{type:\"video/mp4\"});setVideoBlob(blob);};mediaRecorderRef.current=mediaRecorder;mediaRecorder.start();setRecording(true);}catch(error){console.error(\"Error accessing webcam:\",error);}};const stopRecording=()=>{if(mediaRecorderRef.current){mediaRecorderRef.current.stop();setRecording(false);videoRef.current.srcObject.getTracks().forEach(track=>track.stop());}};const uploadVideo=async()=>{if(!videoBlob||!email){alert(\"Please enter your email and record a video.\");return;}const formData=new FormData();formData.append(\"file\",videoBlob,\"recorded-video.mp4\");formData.append(\"email\",email);try{const response=await axios.post(\"http://141.148.219.190:8000/verify-video/\",formData,{headers:{\"Content-Type\":\"multipart/form-data\"}});alert(response.data.verified?\"✅ Verification Successful\":\"❌ Verification Failed\");}catch(error){console.error(\"Error uploading video:\",error);alert(\"Upload failed. Please try again.\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen flex flex-col items-center justify-center bg-gray-100 p-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold mb-4\",children:\"Candidate Video Capture\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Enter your email\",className:\"p-2 border rounded mb-4\",value:email,onChange:e=>setEmail(e.target.value)}),/*#__PURE__*/_jsx(\"video\",{ref:videoRef,autoPlay:true,className:\"mb-4 border rounded\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:!recording?/*#__PURE__*/_jsx(\"button\",{className:\"bg-green-500 text-white px-4 py-2 rounded\",onClick:startRecording,children:\"Start Recording\"}):/*#__PURE__*/_jsx(\"button\",{className:\"bg-red-500 text-white px-4 py-2 rounded\",onClick:stopRecording,children:\"Stop Recording\"})}),videoBlob&&/*#__PURE__*/_jsx(\"button\",{className:\"bg-blue-500 text-white px-4 py-2 rounded\",onClick:uploadVideo,children:\"Upload Video\"})]});};export default VideoCapture;","map":{"version":3,"names":["React","useRef","useState","axios","jsx","_jsx","jsxs","_jsxs","VideoCapture","videoRef","mediaRecorderRef","recording","setRecording","videoBlob","setVideoBlob","email","setEmail","startRecording","stream","navigator","mediaDevices","getUserMedia","video","current","srcObject","mediaRecorder","MediaRecorder","chunks","ondataavailable","event","data","size","push","onstop","blob","Blob","type","start","error","console","stopRecording","stop","getTracks","forEach","track","uploadVideo","alert","formData","FormData","append","response","post","headers","verified","className","children","placeholder","value","onChange","e","target","ref","autoPlay","onClick"],"sources":["/var/www/html/facial_recognition/frontend/src/components/VideoCapture.js"],"sourcesContent":["import React, { useRef, useState } from \"react\";\nimport axios from \"axios\";\n\nconst VideoCapture = () => {\n  const videoRef = useRef(null);\n  const mediaRecorderRef = useRef(null);\n  const [recording, setRecording] = useState(false);\n  const [videoBlob, setVideoBlob] = useState(null);\n  const [email, setEmail] = useState(\"\");\n\n  const startRecording = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({ video: true });\n      videoRef.current.srcObject = stream;\n      const mediaRecorder = new MediaRecorder(stream);\n      const chunks = [];\n\n      mediaRecorder.ondataavailable = (event) => {\n        if (event.data.size > 0) {\n          chunks.push(event.data);\n        }\n      };\n\n      mediaRecorder.onstop = () => {\n        const blob = new Blob(chunks, { type: \"video/mp4\" });\n        setVideoBlob(blob);\n      };\n\n      mediaRecorderRef.current = mediaRecorder;\n      mediaRecorder.start();\n      setRecording(true);\n    } catch (error) {\n      console.error(\"Error accessing webcam:\", error);\n    }\n  };\n\n  const stopRecording = () => {\n    if (mediaRecorderRef.current) {\n      mediaRecorderRef.current.stop();\n      setRecording(false);\n      videoRef.current.srcObject.getTracks().forEach((track) => track.stop());\n    }\n  };\n\n  const uploadVideo = async () => {\n    if (!videoBlob || !email) {\n      alert(\"Please enter your email and record a video.\");\n      return;\n    }\n    const formData = new FormData();\n    formData.append(\"file\", videoBlob, \"recorded-video.mp4\");\n    formData.append(\"email\", email);\n\n    try {\n      const response = await axios.post(\n        \"http://141.148.219.190:8000/verify-video/\",\n        formData,\n        { headers: { \"Content-Type\": \"multipart/form-data\" } }\n      );\n      alert(response.data.verified ? \"✅ Verification Successful\" : \"❌ Verification Failed\");\n    } catch (error) {\n      console.error(\"Error uploading video:\", error);\n      alert(\"Upload failed. Please try again.\");\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col items-center justify-center bg-gray-100 p-6\">\n      <h1 className=\"text-2xl font-bold mb-4\">Candidate Video Capture</h1>\n      <input\n        type=\"email\"\n        placeholder=\"Enter your email\"\n        className=\"p-2 border rounded mb-4\"\n        value={email}\n        onChange={(e) => setEmail(e.target.value)}\n      />\n      <video ref={videoRef} autoPlay className=\"mb-4 border rounded\" />\n      <div className=\"mb-4\">\n        {!recording ? (\n          <button className=\"bg-green-500 text-white px-4 py-2 rounded\" onClick={startRecording}>\n            Start Recording\n          </button>\n        ) : (\n          <button className=\"bg-red-500 text-white px-4 py-2 rounded\" onClick={stopRecording}>\n            Stop Recording\n          </button>\n        )}\n      </div>\n      {videoBlob && (\n        <button className=\"bg-blue-500 text-white px-4 py-2 rounded\" onClick={uploadVideo}>\n          Upload Video\n        </button>\n      )}\n    </div>\n  );\n};\n\nexport default VideoCapture;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}