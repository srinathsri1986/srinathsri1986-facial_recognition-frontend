{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import CandidateDetails from\"./CandidateDetails\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CandidateDashboard=()=>{const[candidate,setCandidate]=useState(null);const[interviews,setInterviews]=useState([]);const[isEditing,setIsEditing]=useState(false);const navigate=useNavigate();const email=sessionStorage.getItem(\"candidateEmail\");useEffect(()=>{if(!email){navigate(\"/candidate-login\");return;}const fetchData=async()=>{try{const apiUrl=`http://141.148.219.190:8000/api/candidate/${email}`;console.log(\"Fetching data from:\",apiUrl);const response=await fetch(apiUrl);// ✅ Check response status\nif(!response.ok){console.error(\"Error fetching candidate data:\",response.status,await response.text());throw new Error(`HTTP ${response.status} - API request failed`);}// ✅ Ensure JSON parsing\nconst data=await response.json();setCandidate(data.data);}catch(error){console.error(\"Error fetching data:\",error);}};fetchData();},[email,navigate]);const handleLogout=()=>{sessionStorage.removeItem(\"candidateEmail\");sessionStorage.removeItem(\"candidateCompletedDetails\");// Remove any other relevant data\nnavigate(\"/candidate-login\");// Redirect to login page\n};if(!candidate){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-10 text-xl font-bold\",children:\"Loading Candidate Details...\"});}const handleEditClick=()=>{setIsEditing(true);};const handleDetailsUpdated=()=>{setIsEditing(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-100 flex flex-col items-center p-10\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between w-full mb-6 px-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold\",children:\"Candidate Dashboard\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded\",onClick:handleLogout,children:\"Sign Out\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 shadow-md rounded-lg w-3/4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold mb-4\",children:\"Profile Information\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name:\"}),\" \",candidate.first_name,\" \",candidate.last_name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",candidate.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Phone:\"}),\" \",candidate.phone]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Address:\"}),\" \",candidate.address]}),candidate.id_proof&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"ID Proof:\"}),\" \",/*#__PURE__*/_jsx(\"a\",{href:`/api/uploads/id_proof/${candidate.id_proof}`,target:\"_blank\",rel:\"noopener noreferrer\",children:\"View\"})]}),candidate.resume&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Resume:\"}),\" \",/*#__PURE__*/_jsx(\"a\",{href:`/api/uploads/resume/${candidate.resume}`,target:\"_blank\",rel:\"noopener noreferrer\",children:\"View\"})]}),candidate.photo&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Photo:\"}),\" \",/*#__PURE__*/_jsx(\"img\",{src:`/api/uploads/photo/${candidate.photo}`,alt:\"Candidate Photo\",className:\"max-w-full h-auto\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"mt-4 px-4 py-2 bg-blue-500 text-white rounded\",onClick:handleEditClick,children:\"Edit Details\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 shadow-md rounded-lg w-3/4 mt-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold mb-4\",children:\"Upcoming Interviews\"}),interviews.length>0?/*#__PURE__*/_jsx(\"ul\",{children:interviews.map((interview,index)=>/*#__PURE__*/_jsxs(\"li\",{className:\"border p-3 mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Company:\"}),\" \",interview.company,\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Date:\"}),\" \",interview.date,\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Time:\"}),\" \",interview.time,\" \",/*#__PURE__*/_jsx(\"br\",{}),interview.meeting_link&&/*#__PURE__*/_jsx(\"a\",{href:interview.meeting_link,target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-blue-600\",children:\"Join Zoom Meeting\"})]},index))}):/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"No upcoming interviews.\"})]}),isEditing&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed top-0 left-0 w-full h-full bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-lg shadow-lg w-2/3 max-w-lg\",children:[/*#__PURE__*/_jsx(CandidateDetails,{onDetailsUpdated:handleDetailsUpdated}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsEditing(false),className:\"mt-4 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded\",children:\"Close Edit\"})]})})]});};export default CandidateDashboard;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","CandidateDetails","jsx","_jsx","jsxs","_jsxs","CandidateDashboard","candidate","setCandidate","interviews","setInterviews","isEditing","setIsEditing","navigate","email","sessionStorage","getItem","fetchData","apiUrl","console","log","response","fetch","ok","error","status","text","Error","data","json","handleLogout","removeItem","className","children","handleEditClick","handleDetailsUpdated","onClick","first_name","last_name","phone","address","id_proof","href","target","rel","resume","photo","src","alt","length","map","interview","index","company","date","time","meeting_link","onDetailsUpdated"],"sources":["/var/www/html/facial_recognition/frontend/src/components/CandidateDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport CandidateDetails from \"./CandidateDetails\";\n\nconst CandidateDashboard = () => {\n    const [candidate, setCandidate] = useState(null);\n    const [interviews, setInterviews] = useState([]);\n    const [isEditing, setIsEditing] = useState(false);\n    const navigate = useNavigate();\n    const email = sessionStorage.getItem(\"candidateEmail\");\n\n    useEffect(() => {\n        if (!email) {\n            navigate(\"/candidate-login\");\n            return;\n        }\n\n        const fetchData = async () => {\n          try {\n              const apiUrl = `http://141.148.219.190:8000/api/candidate/${email}`;\n              console.log(\"Fetching data from:\", apiUrl);\n      \n              const response = await fetch(apiUrl);\n      \n              // ✅ Check response status\n              if (!response.ok) {\n                  console.error(\"Error fetching candidate data:\", response.status, await response.text());\n                  throw new Error(`HTTP ${response.status} - API request failed`);\n              }\n      \n              // ✅ Ensure JSON parsing\n              const data = await response.json();\n              setCandidate(data.data);\n          } catch (error) {\n              console.error(\"Error fetching data:\", error);\n          }\n      };      \n\n        fetchData();\n    }, [email, navigate]);\n\n    const handleLogout = () => {\n        sessionStorage.removeItem(\"candidateEmail\");\n        sessionStorage.removeItem(\"candidateCompletedDetails\"); // Remove any other relevant data\n        navigate(\"/candidate-login\"); // Redirect to login page\n    };\n\n    if (!candidate) {\n        return <div className=\"text-center mt-10 text-xl font-bold\">Loading Candidate Details...</div>;\n    }\n\n    const handleEditClick = () => {\n        setIsEditing(true);\n    };\n\n    const handleDetailsUpdated = () => {\n        setIsEditing(false);\n    };\n\n    return (\n        <div className=\"min-h-screen bg-gray-100 flex flex-col items-center p-10\">\n            <div className=\"flex justify-between w-full mb-6 px-6\">\n                <h1 className=\"text-3xl font-bold\">Candidate Dashboard</h1>\n                <button \n                    className=\"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded\"\n                    onClick={handleLogout}\n                >\n                    Sign Out\n                </button>\n            </div>\n\n            <div className=\"bg-white p-6 shadow-md rounded-lg w-3/4\">\n                <h2 className=\"text-2xl font-semibold mb-4\">Profile Information</h2>\n                <p><strong>Name:</strong> {candidate.first_name} {candidate.last_name}</p>\n                <p><strong>Email:</strong> {candidate.email}</p>\n                <p><strong>Phone:</strong> {candidate.phone}</p>\n                <p><strong>Address:</strong> {candidate.address}</p>\n\n                {candidate.id_proof && (\n                    <p>\n                        <strong>ID Proof:</strong>{\" \"}\n                        <a href={`/api/uploads/id_proof/${candidate.id_proof}`} target=\"_blank\" rel=\"noopener noreferrer\">\n                            View\n                        </a>\n                    </p>\n                )}\n\n                {candidate.resume && (\n                    <p>\n                        <strong>Resume:</strong>{\" \"}\n                        <a href={`/api/uploads/resume/${candidate.resume}`} target=\"_blank\" rel=\"noopener noreferrer\">\n                            View\n                        </a>\n                    </p>\n                )}\n\n                {candidate.photo && (\n                    <p>\n                        <strong>Photo:</strong>{\" \"}\n                        <img\n                            src={`/api/uploads/photo/${candidate.photo}`}\n                            alt=\"Candidate Photo\"\n                            className=\"max-w-full h-auto\"\n                        />\n                    </p>\n                )}\n\n                <button\n                    className=\"mt-4 px-4 py-2 bg-blue-500 text-white rounded\"\n                    onClick={handleEditClick}\n                >\n                    Edit Details\n                </button>\n            </div>\n\n            <div className=\"bg-white p-6 shadow-md rounded-lg w-3/4 mt-6\">\n                <h2 className=\"text-2xl font-semibold mb-4\">Upcoming Interviews</h2>\n                {interviews.length > 0 ? (\n                    <ul>\n                        {interviews.map((interview, index) => (\n                            <li key={index} className=\"border p-3 mb-2\">\n                                <strong>Company:</strong> {interview.company} <br />\n                                <strong>Date:</strong> {interview.date} <br />\n                                <strong>Time:</strong> {interview.time} <br />\n                                {interview.meeting_link && (\n                                    <a\n                                        href={interview.meeting_link}\n                                        target=\"_blank\"\n                                        rel=\"noopener noreferrer\"\n                                        className=\"text-blue-600\"\n                                    >\n                                        Join Zoom Meeting\n                                    </a>\n                                )}\n                            </li>\n                        ))}\n                    </ul>\n                ) : (\n                    <p className=\"text-gray-600\">No upcoming interviews.</p>\n                )}\n            </div>\n\n            {isEditing && (\n                <div className=\"fixed top-0 left-0 w-full h-full bg-black bg-opacity-50 flex items-center justify-center z-50\">\n                    <div className=\"bg-white p-8 rounded-lg shadow-lg w-2/3 max-w-lg\">\n                        <CandidateDetails onDetailsUpdated={handleDetailsUpdated} />\n                        <button onClick={() => setIsEditing(false)} className=\"mt-4 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded\">\n                            Close Edit\n                        </button>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default CandidateDashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}